// --- AUTHENTIFICATION ---
    const loginView = document.getElementById('login-view');
    const appContent = document.getElementById('app-content');

    // Cette fonction surveille si l'utilisateur est connect√© ou non
    onAuthStateChanged(auth, (user) => {
      if (user) {
        // L'utilisateur est connect√©
        currentUser = user;
        loginView.style.display = 'none';
        appContent.style.display = 'block';
        document.getElementById('user-greeting').textContent = `Bonjour ${user.displayName.split(' ')[0]} üëã`;
        document.getElementById('user-photo').src = user.photoURL;
        initDataSync(); // On lance la synchronisation des donn√©es
      } else {
        // L'utilisateur est d√©connect√©
        currentUser = null;
        loginView.style.display = 'flex';
        appContent.style.display = 'none';
      }
    });

    // ACTION : Bouton de connexion (Redirection au lieu de Popup)
    document.getElementById('loginBtn').addEventListener('click', () => {
      signInWithRedirect(auth, provider);
    });

    // ACTION : Bouton de d√©connexion
    document.getElementById('logoutBtn').addEventListener('click', () => {
      if (confirm("Voulez-vous vous d√©connecter ?")) {
        signOut(auth);
      }
    });
